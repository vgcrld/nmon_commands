#!/usr/bin/env ruby

require 'nmon_commands'
require 'sinatra'
require 'ostruct'

HOME = File.dirname(File.dirname(__FILE__))

config = OpenStruct.new(
  script: __FILE__,
     bin: File.dirname(__FILE__),
    home: HOME,
   views: File.join(HOME, 'templates'),
  public: File.join(HOME, 'assets'),
    port: 10888,
    bind: 0,
     run: true
)

ap config

# Configure Sinatra
set :port, config.port
set :bind, config.bind
set :run, config.run
set :views, config.views
set :public_folder, config.public

get '/view/:customer/:uuid' do
  haml :view
end

get '/doc' do
  haml :doc
end



